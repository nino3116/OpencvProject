{% extends "cam/base.html" %} 
{% block title %}Video List{% endblock %} 

<body class="d-flex h-100 text-center bg-dark text-white ">
{% block content %}
<div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
{% include "cam/header.html" %}

<main>
    <h1>Video List page</h1>
    <div class="container mt-4">
        <h2>녹화된 영상 목록 (날짜별)</h2>
        {% if videos_by_date %} {% for date, video_list in videos_by_date.items() %}
        <h4 class="mt-3">{{ date }}</h4>
        {% if video_list %}
        <ul class="list-group">
          {% for video_info in video_list %}
          <li class="list-group-item d-flex justify-content-between align-items-center">
            <span>{{ video_info.camera_name }} - {{ video_info.filename }}</span>
      
            <div>
              <a
                href="{{ url_for('cam.play_video', path=video_info.path) }}"
                target="_blank"
                class="btn btn-primary btn-sm ml-1"
              >
                재생
              </a>
      
              <a
                href="{{ url_for('cam.download_video', path=video_info.path) }}"
                download="{{ video_info.filename }}"
                class="btn btn-success btn-sm ml-1"
              >
                다운로드
              </a>
            </div>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <p>해당 날짜에 녹화된 영상이 없습니다.</p>
        {% endif %} {% endfor %} {% else %}
        <p>녹화된 영상이 없습니다.</p>
        {% endif %}
        <div class="mt-3">
          <a href="{{ url_for('cam.index') }}" class="btn btn-secondary">돌아가기</a>
        </div>
      </div>
</main>

{% include "cam/footer.html" %}
{% endblock %}
</div>
</body>

<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.11.8/umd/popper.min.js"></script>
<script src="{{url_for ('static', filename = 'js/bootstrap.bundle.min.js') }}"></script>
